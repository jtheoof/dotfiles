#!/bin/bash

function install_ppa() {
#	sudo add-apt-repository ppa:bumblebee/stable # Bumblebee
	sudo add-apt-repository ppa:tualatrix/ppa # Ubuntu Tweak
	sudo add-apt-repository ppa:tiheum/equinox # Faenza icons
	sudo add-apt-repository ppa:caffeine-developers/ppa # Caffeine

	sudo apt-get update
}

function install_packages() {
	# Ubuntu
	sudo apt-get install -y gnome-tweak-tool ubuntu-tweak faenza-icon-theme \
 	   	caffeine synapse
#	sudo apt-get install -y bumblebee
	# Editors
	sudo apt-get install -y vim-gnome exuberant-ctags
	# Shell
	sudo apt-get install -y tree ack-grep zsh terminator tilda
	# Compiz
	sudo apt-get install -y compizconfig-settings-manager compiz-plugins-extra
	# Programming
	sudo apt-get install -y python ruby build-essential
	# Graphics
	sudo apt-get install -y gcolor2 colordiff
	# VCS
	sudo apt-get install -y git tig subversion mercurial
	# Networking
	sudo apt-get install -y curl socat
	# Scripting
#	sudo apt-get install -y python-django python-mysqldb mysql-server
}

function config_zsh() {
    olddir=$PWD
    cd $HOME
    wget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh
    for i in $HOME/dev/me/config/files/.config/zsh/themes/*; do
        echo $i
        basename $i
        ln -s $i $HOME/.oh-my-zsh/themes/$(basename $i)
    done
    cp $HOME/dev/me/config/files/.config/zsh/themes/* $HOME/.oh-my-zsh/themes/
    cd $olddir
}

function config_sudoers() {
    sudo sed -i 's/\(^Defaults\(\s\+\)env_reset\)/\1\nDefaults\2timestamp_timeout=-1/g' /etc/sudoers
}

function make_links() {
    olddir=$PWD

    cd ../files/
    for i in ./.bash_*; do
        echo $i
        ln -s $PWD/$i $HOME/$i
    done
    for i in ./.*rc; do
        echo $i
        ln -s $PWD/$i $HOME/$i
    done
    ln -s $PWD/.dircolors.ansi-dark ~/.dircolors
    ln -s $PWD/.gitconfig ~/.gitconfig

    # Terminator config
    if [ ! -d $HOME/.config/terminator ]; then
        mkdir -p $HOME/.config/terminator
    elif [ -f $HOME/.config/terminator/config ]; then
        rm $HOME/.config/terminator/config
    fi
    ln -s $PWD/.config/terminator/config ~/.config/terminator/config

    cd $olddir
}

install_ppa
install_packages
config_zsh
config_sudoers
make_links
