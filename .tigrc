# vim:set sw=4 ts=4 et:
# Name:     Jeremy Attali's .tigrc
# Author:   Jeremy Attali
# URL:
# License:  MIT license (see .vimrc end of file)
# Created:  In Paris

# Variables {{{

set horizontal-scroll = 33%
set line-graphics = yes
set show-author = yes
set show-date = default
set show-refs = yes
set show-rev-graph = no

# }}}
# Colors {{{
color cursor white color8
color main-head magenta default
color main-tag magenta default
# }}}
# Bindings {{{

# Generic {{{

bind generic s view-status
bind generic F !git fetch
bind generic y !@sh -c "echo -n %(commit) | xsel -ib"
bind generic Y !@sh -c "echo -n %(commit) | xsel -ib"

# }}}
# Main {{{

bind main ! !git revert %(commit)        # Revert commit
bind main C !?git checkout %(commit)     # Checkout commit
bind main F !git fetch                   # Fetch repository
bind main I !git rebase -i               # Interactive rebasing
bind main T !git rebase -i %(commit)     # Interactive rebasing (unTil)
bind main P !?git cherry-pick %(commit)  # Checkout commit
bind main R !?git rebase                 # Rebasing after fetch
bind main U !?git up                     # Update repository
bind main X !?git push                   # Push to tracking remote

# }}}
# Diff {{{

bind diff Up move-up
bind diff Down move-down

# Edit all files of commit
bind diff A !git add %(file)              # Add current file
bind diff C !git commit -av               # Add and commit
bind diff E !sh -c "vim $(git show --pretty='format:' --name-only %(commit))"
bind diff V !vim %(file)                  # Edit file
bind diff P !git add -p %(file)           # Partially add current file

# }}}
# Tree {{{

bind tree V !vim %(file)

# }}}
# Branch {{{

bind branch n !@git branch %(prompt) # Create a new branch

# }}}
# Status {{{

bind status A !git commit --amend
bind status N !@git add -N %(file) # Intent to add
bind status R !git rebase -i

# }}}
# Stage {{{

bind stage 1 stage-update-line # Stage a single line
bind stage C !@git commit # Commit staging changes

# }}}

# }}}
